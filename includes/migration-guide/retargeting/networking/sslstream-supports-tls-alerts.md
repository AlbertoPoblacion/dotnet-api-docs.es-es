### <a name="sslstream-supports-tls-alerts"></a>SslStream es compatible con las alertas de TLS

|   |   |
|---|---|
|Detalles|Después de un protocolo de enlace TLS ha fallado, un <xref:System.IO.IOException?displayProperty=name> con interior <xref:System.ComponentModel.Win32Exception?displayProperty=name> se producirá una excepción por la primera operación de E/S de lectura/escritura. El <xref:System.ComponentModel.Win32Exception.NativeErrorCode?displayProperty=name> de código para el <xref:System.ComponentModel.Win32Exception?displayProperty=name> pueden asignarse a las alertas de TLS desde la parte remota mediante este [Schannel documentación](https://msdn.microsoft.com/library/windows/desktop/dd721886%28v=vs.85%29.aspx). Para obtener más información, consulte [RFC 2246: alertas de Error de la sección 7.2.2](https://tools.ietf.org/html/rfc2246#section-7.2.2)el comportamiento en .NET 4.6.2 y a continuación es que el canal de transporte (normalmente la conexión TCP) agotará el tiempo de espera durante la escritura o lectura si produce un error de la otra parte de la Protocolo de enlace e inmediatamente después se rechazó la conexión.|
|Sugerencia|Las aplicaciones que llaman a redes I/O APIs como <xref:System.IO.Stream.Read(System.Byte[],System.Int32,System.Int32)> / <xref:System.IO.Stream.Write(System.Byte[],System.Int32,System.Int32)> debe controlar <xref:System.IO.IOException> o <xref:System.TimeoutException?displayProperty=name>. La característica de alertas de TLS está habilitada de forma predeterminada a partir de .NET 4.7. Las aplicaciones dirigidas a .NET 4.0 - .NET 4.6.2 ejecutando en un sistema superior o .NET 4.7 tendrá la función deshabilitada para mantener la compatibilidad. La API de configuración siguiente está disponible para habilitar o deshabilitar la característica de .NET 4.6 y versiones posteriores de aplicaciones que se ejecutan en .NET 4.7 o marco de trabajo mayor.<ul><li>Mediante programación:</li></ul>Debe ser el lo primero que hace la aplicación desde que se inicializará en una sola vez ServicePointManager:<pre><code class="language-C#">AppContext.SetSwitch(&quot;TestSwitch.LocalAppContext.DisableCaching&quot;, true);&#13;&#10;AppContext.SetSwitch(&quot;Switch.System.Net.DontEnableTlsAlerts&quot;, true); // Set to &#39;false&#39; to enable the feature in .NET 4.6 - 4.6.2.&#13;&#10;</code></pre><ul><li>AppConfig:</li></ul><pre><code class="language-XML">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Net.DontEnableTlsAlerts=true&quot;/&gt;&#13;&#10;&lt;!-- Set to &#39;false&#39; to enable the feature in .NET 4.6 - 4.6.2. --&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><ul><li>Clave del registro (máquina global):</li></ul>Establezca el valor en 'false' para habilitar la característica en .NET 4.6 - 4.6.2.<pre><code>Key = HKLM\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\AppContext\Switch.System.Net.DontEnableTlsAlerts&#13;&#10;Type = String&#13;&#10;Value = &quot;true&quot;&#13;&#10;</code></pre>|
|Ámbito|Borde|
|Versión|4.7|
|Tipo|Redestinación|
|API afectadas|<ul><li><xref:System.Net.Security.SslStream?displayProperty=nameWithType></li><li><xref:System.Net.WebRequest?displayProperty=nameWithType></li><li><xref:System.Net.HttpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.FtpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.Mail.SmtpClient?displayProperty=nameWithType></li><li><xref:System.Net.Http?displayProperty=nameWithType></li></ul>|

