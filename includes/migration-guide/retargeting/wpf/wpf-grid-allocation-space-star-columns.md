### <a name="wpf-grid-allocation-of-space-to-star-columns"></a>Asignación de espacio del elemento Grid de WPF a las columnas de asterisco

|   |   |
|---|---|
|Detalles|A partir de las aplicaciones que tienen como destino .NET Framework 4.7, WPF reemplaza el algoritmo que usa <xref:System.Windows.Controls.Grid> para asignar espacio a las columnas *. Esto cambiará el ancho real que se asigna a las columnas * en una serie de casos:<ul><li>Cuando una o más columnas * también tienen un ancho mínimo o máximo que invalida la asignación proporcional para esa columna. (El ancho mínimo se puede derivar de una declaración MinWidth explícita, o bien de un mínimo implícito obtenido del contenido de la columna. El ancho máximo solo se puede definir de forma explícita, a partir de una declaración MaxWidth).</li><li>Cuando una o más columnas * declaran un peso de * extremadamente grande, superior a 10^298.</li><li>Cuando los pesos de * son suficientemente distintos como para detectar una inestabilidad de punto flotante (desbordamiento, subdesbordamiento y pérdida de precisión).</li><li>Cuando se habilita el redondeo del diseño, y el punto por pulgada de visualización efectivo es suficientemente alto.</li></ul>En los dos primeros casos, los anchos producidos por el algoritmo nuevo pueden ser significativamente distintos a los producidos por el antiguo; en el último caso, la diferencia será como máximo de uno o dos píxeles. El algoritmo nuevo corrige varios errores presentes en el antiguo:<ol><li>La asignación total a columnas puede superar el ancho de la cuadrícula. Esto puede ocurrir cuando se asigna espacio a una columna cuya parte proporcional es inferior a su tamaño mínimo. El algoritmo asigna el tamaño mínimo, lo que disminuye el espacio disponible para otras columnas. Si no hay ninguna columna * para asignar, la asignación total será demasiado grande.</li><li>La asignación total puede no alcanzar el ancho de la cuadrícula. Este es el doble problema que presenta el n.º 1, que surge cuando se asigna a una columna cuya parte proporcional es superior a su tamaño máximo, sin columnas * para ocupar el margen de demora.</li><li>Dos columnas * pueden recibir ubicaciones no proporcionales a sus pesos de *. Esta es una versión más ligera de n.º 1/n.º 2, que surge cuando se asigna a las columnas * A, B y C (en ese orden), donde la parte proporcional de B infringe la limitación mínima (o máxima). Como ocurría anteriormente, esto cambia el espacio disponible en la columna C, que obtiene menos (o más) asignación proporcional respecto a A.</li><li>Las columnas con pesos extremadamente grandes (&gt; 10^298) se tratan como si tuvieran el peso 10^298. Las diferencias proporcionales entre ellas (y entre columnas con pesos ligeramente más reducidos) no se han respetado.</li><li>Las columnas con pesos infinitos no se administran correctamente. [De hecho, no puede establecer un peso en infinito, pero esta es una restricción artificial. El código de ubicación estaba intentando administrarlo, pero de forma incorrecta].</li><li>Algunos problemas leves al evitar el desbordamiento, el subdesbordamiento, la pérdida de precisión y problemas de punto flotante similares.</li><li>Los ajustes del redondeo del diseño son incorrectos en los puntos por pulgada suficientemente elevados.</li></ol>El algoritmo genera nuevo resultados que cumplen los criterios siguientes: A. El ancho real asignado a una columna * nunca es inferior a su ancho mínimo ni superior a su ancho máximo. B. Cada columna  <em>a la que no se le asigne su ancho mínimo o máximo, se le asigna un ancho proporcional a su peso de <em>. Para ser precisos, si dos columnas se declaran con un ancho x</em> e y</em> respectivamente, y si ninguna de ellas recibe su ancho mínimo o máximo, los anchos reales v y w asignados a las columnas tienen la misma proporción: v / w == x / y. C. El ancho total asignado a las columnas * &quot;proporcionales&quot; es igual al espacio disponible después de la asignación a las columnas restringidas (columnas fijas, automáticas y * a las que se les asigna su ancho mínimo o máximo). Es posible que esto sea cero, por ejemplo si la suma de los anchos mínimos supera el ancho disponible de la cuadrícula. D. Todas estas instrucciones se deben interpretar en relación con el diseño &quot;ideal&quot;. Cuando el redondeo del diseño está activo, el ancho real puede diferir de los anchos ideales en un píxel cómo máximo. El algoritmo anterior respetaba (A) pero no los demás criterios en los casos descritos anteriormente. Todo lo que se afirma en este artículo sobre las columnas y lo valores de ancho también se aplica a las filas y los valores de alto.|
|Sugerencia|De forma predeterminada, las aplicaciones que tienen como destino versiones de .NET Framework a partir de .NET Framework 4.7 verán el nuevo algoritmo, mientras que las aplicaciones que tienen como destino .NET Framework 4.6.2 o versiones anteriores verán el antiguo. Para invalidar el valor predeterminado, use la opción de configuración siguiente:<pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>El valor "true" selecciona el algoritmo antiguo y el valor "false" el nuevo.|
|Ámbito|Secundaria|
|Versión|4.7|
|Tipo|Redestinación|

