### <a name="currentculture-is-not-preserved-across-wpf-dispatcher-operations"></a>CurrentCulture no se conserva en las operaciones del distribuidor de WPF

|   |   |
|---|---|
|Detalles|A partir de .NET Framework 4.6, cambia a <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> o <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> realizadas dentro de un <xref:System.Windows.Threading.Dispatcher?displayProperty=name> se perderá al final de esa operación de distribuidor. De igual forma, se cambia a <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> o <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> realizadas fuera de un distribuidor de operación no surtirán efecto cuando que se ejecuta la operación. En términos prácticos, esto significa que <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> y <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> cambios no pueden fluir entre las devoluciones de llamada de la UI de WPF y otro código en una aplicación WPF. Esto es debido a un cambio en <xref:System.Threading.ExecutionContext?displayProperty=name> que da lugar a <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> y <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> que se almacenará en el comienzo del contexto de ejecución con aplicaciones destinadas a .NET Framework 4.6. Las operaciones de distribuidor de WPF almacenan el contexto de ejecución usado para iniciar la operación y restaurar el contexto anterior cuando la operación se complete. Dado que <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> y <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> ahora forman parte de este contexto, los cambios efectuados en ellas como parte de una operación de distribuidor no persisten fuera de la operación.|
|Sugerencia|Aplicaciones que se ven afectadas por este cambio pueden solucionar el problema almacenando el deseado <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> o <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> en un campo y la protección de todos los cuerpos de operación de distribuidor (incluidos los controladores de devolución de llamada de evento de interfaz de usuario) que el valor correcto <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> y <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> están establecidos. O bien, porque el ExecutionContext cambiar subyacente de este cambio WPF solo afecta a aplicaciones destinadas a .NET Framework 4.6 o posterior, se puede evitar esta interrupción estableciendo como destino el 4.5.2.Apps de .NET Framework que tener como destino .NET Framework 4.6 o posterior también puede trabajar evitar este problema estableciendo la siguiente compatibilidad conmutador:<pre><code>AppContext.SetSwitch(&quot;Switch.System.Globalization.NoAsyncCurrentCulture&quot;, true);&#13;&#10;</code></pre>Este problema se ha solucionado por WPF en .NET Framework 4.6.2. También se ha corregido en marcos .NET 4.6, 4.6.1 a través de [3139549 KB](https://support.microsoft.com/kb/3139549). Las aplicaciones dirigidas a .NET 4.6 o posterior obtendrá automáticamente el comportamiento correcto en aplicaciones de WPF - <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> / <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>) se conservarían a través de las operaciones del distribuidor.|
|Ámbito|Secundaria|
|Versión|4.6|
|Tipo|Redestinación|

