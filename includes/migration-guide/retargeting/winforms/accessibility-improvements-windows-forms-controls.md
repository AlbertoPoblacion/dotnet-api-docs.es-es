### <a name="accessibility-improvements-in-windows-forms-controls"></a>Mejoras de accesibilidad de controles de formularios Windows Forms

|   |   |
|---|---|
|Detalles|Formularios Windows Forms es mejorar su funcionamiento con tecnologías de accesibilidad para una mejor compatibilidad con clientes de Windows Forms. Entre estos se incluyen los siguientes cambios:<ul><li>Cambios para mejorar la presentación durante el modo de contraste alto.</li><li>Cambios para mejorar la experiencia de exploración de la propiedad. Mejoras del explorador de propiedad incluyen:</li><li>Una mejor navegación mediante teclado gracias a las distintas ventanas de selección desplegables.</li><li>Reduce las posiciones de tabulación innecesarios.</li><li>Mejor notificación de tipos de control.</li><li>Comportamiento mejorado de Narrador.</li><li>Cambios para implementar patrones de accesibilidad de interfaz de usuario que faltan en los controles.</li></ul>|
|Sugerencia|<strong>Cómo participar o no en estos cambios</strong>en orden de la aplicación para beneficiarse de estos cambios, se debe ejecutar en .NET Framework 4.7.1 o una versión posterior. La aplicación puede beneficiarse de estos cambios en cualquiera de las maneras siguientes:<ul><li>Se vuelve a compilar para .NET Framework 4.7.1. Estos cambios de accesibilidad están habilitados de forma predeterminada en las aplicaciones de Windows Forms que tienen como destino .NET Framework 4.7.1 o posterior.</li><li>Participar en los comportamientos de accesibilidad heredado agregando las siguientes [AppContext conmutador](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) a la <code>&lt;runtime&gt;</code> sección del archivo app.config y si se establece en <code>false</code>, como se muestra en el ejemplo siguiente.</li></ul><pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#13;&#10;&lt;configuration&gt;&#13;&#10;&lt;startup&gt;&#13;&#10;&lt;supportedRuntime version=&quot;v4.0&quot; sku=&quot;.NETFramework,Version=v4.7&quot;/&gt;&#13;&#10;&lt;/startup&gt;&#13;&#10;&lt;runtime&gt;&#13;&#10;&lt;!-- AppContextSwitchOverrides value attribute is in the form of &#39;key1=true/false;key2=true/false  --&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.UseLegacyAccessibilityFeatures=false&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;&lt;/configuration&gt;&#13;&#10;</code></pre>Las aplicaciones que tienen como destino .NET Framework 4.7.1 o posterior y desea conservar heredado comportamiento de accesibilidad puede participar en el uso de características de accesibilidad heredado estableciendo explícitamente este modificador AppContext en <code>true</code>. Para obtener información general de la automatización de interfaz de usuario, consulte la [información general sobre la automatización de interfaz de usuario](~/docs/framework/ui-automation/ui-automation-overview.md). <strong>Agrega compatibilidad con patrones de automatización de interfaz de usuario</strong>los clientes de accesibilidad pueden aprovechar las ventajas de la nueva funcionalidad de accesibilidad de formularios Windows Forms usando los modelos de invocación comunes, que se describen públicamente. Estos patrones no son específicas de formularios Windows Forms. Por ejemplo, los clientes de accesibilidad pueden llamar el método QueryInterface en la interfaz IAccessible (MAAS) para obtener una interfaz IServiceProvider. Si esta interfaz está disponible, los clientes pueden utilizar su método de QueryService para solicitar una interfaz IAccessibleEx. Para obtener más información, consulte [utilizando IAccessibleEx desde un cliente](https://msdn.microsoft.com/library/windows/desktop/dd561924.aspx). A partir de .NET Framework 4.7.1, IServiceProvider y [IAccessibleEx](https://msdn.microsoft.com/library/windows/desktop/dd561898.aspx) (si procede) están disponibles para los objetos de accesibilidad de formularios Windows Forms. .NET Framework 4.7.1 agrega compatibilidad para los siguientes patrones de automatización de interfaz de usuario y las propiedades:<ul><li>El <code>T:System.Windows.Forms.ToolStripSplitButton</code> y <code>T:System.Windows.Forms.ComboBox</code> controles admiten la [patrón de expandir o contraer](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</li><li>El <code>T:System.Windows.Forms.ToolStripMenuItem</code> control tiene un [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) valor de la propiedad <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>.</li><li>El <code>T:System.Windows.Forms.ToolStripItem</code> control admite el [nombre](xref:System.Windows.Automation.AutomationElement.NameProperty) propiedad y [patrón de expandir o contraer](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</li><li>El <code>T:System.Windows.Forms.ToolStripDropDownItem</code> controlar admite <xref:System.Windows.Forms.AccessibleEvents> indicando StateChange y NameChange cuando la lista desplegable está expandido o contraído.</li><li>El <code>T:System.Windows.Forms.ToolStripDropDownButton</code> control tiene un [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) el valor de propiedad <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>.</li><li>El <code>T:System.Windows.Forms.DataGridViewCheckBoxCell</code> control admite el [patrón Toggle](xref:System.Windows.Automation.TogglePattern).</li><li>El <code>T:System.Windows.Forms.NumericUpDown</code> y <code>T:System.Windows.Forms.DomainUpDown</code> controles admiten la [nombre](xref:System.Windows.Automation.AutomationElement.NameProperty) y tener un [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-spinner-control-type.md) de <xref:System.Windows.Automation.ControlType.Spinner?displayProperty=nameWithType>.</li></ul><strong>Mejoras en el control PropertyGrid</strong>.NET Framework 4.7.1 agrega las siguientes mejoras para el control de PropertyBrowser.:<ul><li>El <strong>detalles</strong> botón en el cuadro de diálogo de error que se muestra cuando el usuario escribe un valor incorrecto en el <code>T:System.Windows.Forms.PropertyGrid</code> control admite el [patrón de expandir o contraer](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md), estado y cambio de nombre las notificaciones y un [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) propiedad con un valor de <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>.</li><li>El panel de mensajes que muestra cuando el <strong>detalles</strong> se expande el botón del cuadro de diálogo de error es ahora accesible de teclado y permite que el Narrador anunciar el contenido del mensaje de error.</li><li>El <xref:System.Windows.Forms.AccessibleRole> de filas de <code>T:System.Windows.Forms.PropertyGrid</code> control han cambiado respecto a &quot;fila&quot; a &quot;celda&quot;. La celda que se asigna a UIA ControlType &quot;DataItem&quot;, que permite que se admiten métodos abreviados de teclado adecuado y anuncios de Narrador.</li><li>El <code>T:System.Windows.Forms.PropertyGrid</code> controlar filas qué encabezado representan elementos cuando la <code>T:System.Windows.Forms.PropertyGrid</code> control tiene un <code>P:System.Windows.Forms.PropertySort</code> propiedad establecida en <code>F:System.Windows.Forms.PropertySory.Categorized</code> tiene un [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) el valor de propiedad <xref:System.Windows.Automation.ControlType.Button?displayProperty=nameWithType></li><li>El <code>T:System.Windows.Forms.PropertyGrid</code> controlar filas qué encabezado representan elementos cuando la <code>T:System.Windows.Forms.PropertyGrid</code> control tiene un <code>P:System.Windows.Forms.PropertySort</code> propiedad establecida en <code>F:System.Windows.Forms.PropertySory.Categorized</code> admite la [patrón de expandir o contraer](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</li><li>Navegación con el teclado mejorado entre la cuadrícula y la barra de herramientas por encima de él. Al presionar &quot;Mayús-Tab&quot; ahora selecciona el primer botón de barra de herramientas, en lugar de la barra de herramientas completa</li><li><code>T:System.Windows.Forms.PropertyGrid</code> controles que se muestran en el modo de contraste alto dibujará un rectángulo de foco alrededor del botón de barra de herramientas que corresponde al actual <code>P:System.Windows.Forms.PropertySort</code> valor de propiedad.</li><li><code>T:System.Windows.Forms.PropertyGrid</code> controles que se muestran en el modo de contraste alto y con un <code>P:System.Windows.Forms.PropertySort</code> propiedad establecida en <code>F:System.Windows.Forms.PropertySory.Categorized</code> le ahora se visualizan en el fondo de los encabezados de categorías en un color de alta contraste.</li><li><code>T:System.Windows.Forms.PropertyGrid</code> controles mejor marca la diferencia entre los elementos de la barra de herramientas tiene el foco y los elementos de barra de herramientas que indican el valor actual de la <code>P:System.Windows.Forms.PropertySort</code> propiedad. Esta revisión está formada por un cambio de contraste alto y un cambio en los escenarios no contraste alto.</li><li><code>T:System.Windows.Forms.PropertyGrid</code> controlar los elementos de barra de herramientas que indica el valor actual de la <code>P:System.Windows.Forms.PropertySort</code> compatibilidad con propiedades la [patrón Toggle](xref:System.Windows.Automation.TogglePattern).</li><li>Compatibilidad mejorada de Narrador para distinguir la alineación seleccionada en el selector de alineación.</li><li>Cuando vacío <code>T:System.Windows.Forms.PropertyGrid</code> control se muestra en un formulario, ahora recibirá foco donde anteriormente no es así.</li></ul><strong>Uso de colores definidos por el sistema operativo en los temas de contraste alto</strong><ul><li><code>T:System.Windows.Forms.Button</code> y <code>T:System.Windows.Forms.CheckBox</code> controla por <code>P:System.Windows.Forms.Control.FlatStyle</code> establecido en <xref:System.Windows.Forms.FlatStyle.System?displayProperty=nameWithType>, que es el estilo predeterminado, ahora usar colores definidos por el sistema operativo en el tema de contraste alto cuando se selecciona. Anteriormente, los colores de fondo y de texto no de contraste y eran difíciles de leer.</li><li><code>T:System.Windows.Forms.Button</code>, <code>T:System.Windows.Forms.CheckBox</code>, <code>T:System.Windows.Forms.RadioButton</code>, <code>T:System.Windows.Forms.Label</code>, <code>T:System.Windows.Forms.LinkLabel</code> y <code>T:System.Windows.Forms.GroupBox</code> con<code>P:System.Windows.Forms.Control.Enabled</code> establecido en <em>false</em>, usa un color sombreado para representar texto en los temas de contraste alto, resultante de bajo contraste con la en segundo plano. Ahora usan estos controles &quot;texto deshabilitado&quot; color definido por el sistema operativo. Esta revisión se aplica a los controles con <code>P:System.Windows.Forms.Control.FlatStyle</code> propiedad establecida en un valor distinto de <code>F:System.Windows.Forms.FlatStyle.System</code>. Los controles de este últimos se representan por el sistema operativo.</li><li><code>T:System.Windows.Forms.DataGridView</code> ahora representa un rectángulo visible alrededor del contenido de la celda que tiene el foco actual. Anteriormente, esto no estaba visible en determinados temas de contraste alto.</li><li><code>T:System.Windows.Forms.ToolStripMenuItem</code> controles con un <code>P:System.Windows.Forms.ToolStripItem.Enabled</code> propiedad establecida en <em>false</em> ahora usan la &quot;texto deshabilitado&quot; color definido por el sistema operativo.</li><li><code>T:System.Windows.Forms.ToolStripMenuItem</code> controles con un <code>P:System.Windows.Forms.ToolStripItem.Checked</code> propiedad establecida en <em>true</em> ahora representar la marca de verificación asociada en un color de sistema contraste.  Anteriormente el color de la marca de verificación no estaba contraste suficiente y no es visible en los temas de contraste alto.</li></ul>Nota: Windows10 ha cambiado los valores para algunos colores de contraste alto del sistema. El marco de trabajo de Windows Forms se basa en el marco de trabajo de Win32. Para obtener la mejor experiencia, ejecute la versión más reciente de Windows y participar en los cambios más recientes del sistema operativo, agregue un archivo app.manifest en una aplicación de prueba y comentario el código siguiente:<pre><code>&lt;!-- Windows 10 --&gt;&#13;&#10;&lt;supportedOS Id=&quot;{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}&quot; /&gt;&#13;&#10;</code></pre><strong>Navegación mejorada mediante el teclado</strong><ul><li>Cuando un <code>T:System.Windows.Forms.ComboBox</code> control tiene <code>P:System.Windows.Forms.ComboBox.DropDownStyle</code> establecido en <code>F:System.Windows.Forms.DropDownStyle.DropDownList</code> y es el primer control en la ficha Ordenar en el formulario, muestra ahora un rectángulo de foco cuando se abre el formulario principal mediante el teclado. Antes de este cambio, el foco de teclado estaba en este control, pero no se representa un indicador de foco.</li></ul><strong>Compatibilidad mejorada con Narrador</strong><ul><li>El <code>T:System.Windows.Forms.MonthCalendar</code> control ha agregado compatibilidad para las tecnologías de asistencia obtener acceso al control, incluida la capacidad para Narrador debe leer el valor del control cuando anteriormente no pudo.</li><li>El <code>T:System.Windows.Forms.CheckedListBox</code> control ahora notifica Narrador cuando el <code>P:System.Windows.Forms.CheckState</code> propiedad ha cambiado. Anteriormente, el Narrador no recibió notificación y así los usuarios no sería informa que la <code>P:System.Windows.Forms.CheckState</code> se hubiera actualizado.</li><li>El <code>T:System.Windows.Forms.LinkLabel</code> control ha cambiado la forma notifica Narrador del texto de en el control. Anteriormente, el Narrador anunció este texto dos veces y leer &quot; &amp; &quot; símbolos como texto real, aunque no sean visibles para un usuario. El texto duplicado se quita de los anuncios de Narrador, así como innecesarios &quot; &amp; &quot; símbolos.</li><li>El <code>T:System.Windows.Forms.DataGridViewCell</code> tipos de control ahora correctamente informan sobre el estado de solo lectura para Narrador y otras tecnologías de ayuda.</li><li>Narrador ahora es capaz de leer el menú de sistema de las ventanas secundarias en [interfaz de múltiples documentos](~/docs/framework/winforms/advanced/multiple-document-interface-mdi-applications.md) aplicaciones.</li><li>Narrador ahora es capaz de leer <code>T:System.Windows.Forms.ToolStripMenuItem</code> controla por un <code>P:System.Windows.Forms.ToolStripItem.Enabled</code> propiedad establecida en <em>false</em>. Anteriormente, el Narrador no pudo para centrarse en los elementos de menú deshabilitado para leer el contenido.</li></ul>|
|Ámbito|Major|
|Versión|4.7.1|
|Tipo|Redestinación|
|API afectadas|<ul><li><xref:System.Windows.Forms.ToolStripDropDownButton.CreateAccessibilityInstance?displayProperty=nameWithType></li><li><xref:System.Windows.Forms.DomainUpDown.DomainUpDownAccessibleObject.Name?displayProperty=nameWithType></li><li>[MonthCalendar.AccessibilityObject](xref:System.Windows.Forms.Control.AccessibilityObject)</li></ul>|

