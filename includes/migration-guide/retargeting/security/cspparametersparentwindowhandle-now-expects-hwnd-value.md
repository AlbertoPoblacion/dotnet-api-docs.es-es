### <a name="cspparametersparentwindowhandle-now-expects-hwnd-value"></a><span data-ttu-id="ed630-101">CspParameters.ParentWindowHandle ahora espera que el valor HWND</span><span class="sxs-lookup"><span data-stu-id="ed630-101">CspParameters.ParentWindowHandle now expects HWND value</span></span>

|   |   |
|---|---|
|<span data-ttu-id="ed630-102">Detalles</span><span class="sxs-lookup"><span data-stu-id="ed630-102">Details</span></span>|<span data-ttu-id="ed630-103">El <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> valor, introducida en .NET Framework 2.0, permite que una aplicación registre un valor de identificador de ventana primario de forma que cualquier interfaz de usuario necesarios para tener acceso a la clave (por ejemplo, un PIN solicitar o cuadro de diálogo de consentimiento) se abre como un elemento secundario modal para la ventana especificada. A partir de las aplicaciones que tienen como destino la 4.7 de .NET Framework, una aplicación de formularios Windows Forms puede establecer el <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> propiedad con código similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="ed630-103">The <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> value, introduced in .NET Framework 2.0, allows an application to register a parent window handle value such that any UI required to access the key (such as a PIN prompt or consent dialog) opens as a modal child to the specified window.Starting with apps that target the .NET Framework 4.7, a Windows Forms application can set the <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> property with code like the following:</span></span><pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="ed630-104">En versiones anteriores de .NET Framework, se espera que el valor sea un <xref:System.IntPtr?displayProperty=name> que representa una ubicación de memoria donde el [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) valor residido.</span><span class="sxs-lookup"><span data-stu-id="ed630-104">In previous versions of the .NET Framework, the value was expected to be an <xref:System.IntPtr?displayProperty=name> representing a location in memory where the [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) value resided.</span></span> <span data-ttu-id="ed630-105">Establecer la propiedad en el formulario. Administrar en Windows 7 y versiones anteriores no tenían ningún efecto, pero en Windows 8 y versiones posteriores, genera un &quot; <xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: el parámetro es incorrecto.&quot;</span><span class="sxs-lookup"><span data-stu-id="ed630-105">Setting the property to form.Handle on Windows 7 and earlier versions had no effect, but on Windows 8 and later versions, it results in a &quot;<xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: The parameter is incorrect.&quot;</span></span>|
|<span data-ttu-id="ed630-106">Sugerencia</span><span class="sxs-lookup"><span data-stu-id="ed630-106">Suggestion</span></span>|<span data-ttu-id="ed630-107">Se recomienda que las aplicaciones como destino .NET 4.7 o superior que deseen registrar una relación de la ventana primaria para utilizar el formulario simplificado:</span><span class="sxs-lookup"><span data-stu-id="ed630-107">Applications targeting .NET 4.7 or higher wishing to register a parent window relationship are encouraged to use the simplified form:</span></span><pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="ed630-108">Los usuarios que habían identificado que el valor correcto para pasar es la dirección de una ubicación de memoria que mantiene el valor <code>form.Handle</code> puede rechazar el cambio de comportamiento estableciendo el modificador AppContext <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> a <code>true</code>.</span><span class="sxs-lookup"><span data-stu-id="ed630-108">Users who had identified that the correct value to pass was the address of a memory location which held the value <code>form.Handle</code> can opt out of the behavior change by setting the AppContext switch <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> to <code>true</code>.</span></span><ol><li><span data-ttu-id="ed630-109">Estableciendo mediante programación compatibilidad se activa en el AppContext, como se explica [aquí](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span><span class="sxs-lookup"><span data-stu-id="ed630-109">By programmatically setting compat switches on the AppContext, as explained [here](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span></span></li><li><span data-ttu-id="ed630-110">Agregando la siguiente línea a la sección <code>&lt;runtime&gt;</code> del archivo app.config:</span><span class="sxs-lookup"><span data-stu-id="ed630-110">By adding the following line to the <code>&lt;runtime&gt;</code> section of the app.config file:</span></span></li></ol><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle=true&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="ed630-111">Por el contrario, los usuarios que deseen participar en el nuevo comportamiento en el runtime de .NET Framework 4.7 cuando la aplicación se cargará en versiones anteriores de .NET Framework puede establecer el AppContext cambian a <code>false</code>.</span><span class="sxs-lookup"><span data-stu-id="ed630-111">Conversely, users who wish to opt in to the new behavior on the .NET Framework 4.7 runtime when the application loads under older .NET Framework versions can set the AppContext switch to <code>false</code>.</span></span>|
|<span data-ttu-id="ed630-112">Ámbito</span><span class="sxs-lookup"><span data-stu-id="ed630-112">Scope</span></span>|<span data-ttu-id="ed630-113">Secundaria</span><span class="sxs-lookup"><span data-stu-id="ed630-113">Minor</span></span>|
|<span data-ttu-id="ed630-114">Versión</span><span class="sxs-lookup"><span data-stu-id="ed630-114">Version</span></span>|<span data-ttu-id="ed630-115">4.7</span><span class="sxs-lookup"><span data-stu-id="ed630-115">4.7</span></span>|
|<span data-ttu-id="ed630-116">Tipo</span><span class="sxs-lookup"><span data-stu-id="ed630-116">Type</span></span>|<span data-ttu-id="ed630-117">Redestinación</span><span class="sxs-lookup"><span data-stu-id="ed630-117">Retargeting</span></span>|
|<span data-ttu-id="ed630-118">API afectadas</span><span class="sxs-lookup"><span data-stu-id="ed630-118">Affected APIs</span></span>|<ul><li><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle?displayProperty=nameWithType></li></ul>|

