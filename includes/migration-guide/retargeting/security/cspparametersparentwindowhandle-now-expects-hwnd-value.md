### <a name="cspparametersparentwindowhandle-now-expects-hwnd-value"></a>CspParameters.ParentWindowHandle ahora espera que el valor HWND

|   |   |
|---|---|
|Detalles|El <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> valor, introducida en .NET Framework 2.0, permite que una aplicación registre un valor de identificador de ventana primario de forma que cualquier interfaz de usuario necesarios para tener acceso a la clave (por ejemplo, un PIN solicitar o cuadro de diálogo de consentimiento) se abre como un elemento secundario modal para la ventana especificada. A partir de las aplicaciones que tienen como destino la 4.7 de .NET Framework, una aplicación de formularios Windows Forms puede establecer el <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> propiedad con código similar al siguiente:<pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre>En versiones anteriores de .NET Framework, se espera que el valor sea un <xref:System.IntPtr?displayProperty=name> que representa una ubicación de memoria donde el [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) valor residido. Establecer la propiedad en el formulario. Administrar en Windows 7 y versiones anteriores no tenían ningún efecto, pero en Windows 8 y versiones posteriores, genera un &quot; <xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: el parámetro es incorrecto.&quot;|
|Sugerencia|Se recomienda que las aplicaciones como destino .NET 4.7 o superior que deseen registrar una relación de la ventana primaria para utilizar el formulario simplificado:<pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre>Los usuarios que habían identificado que el valor correcto para pasar es la dirección de una ubicación de memoria que mantiene el valor <code>form.Handle</code> puede rechazar el cambio de comportamiento estableciendo el modificador AppContext <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> a <code>true</code>.<ol><li>Estableciendo mediante programación compatibilidad se activa en el AppContext, como se explica [aquí](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</li><li>Agregando la siguiente línea a la sección <code>&lt;runtime&gt;</code> del archivo app.config:</li></ol><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle=true&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>Por el contrario, los usuarios que deseen participar en el nuevo comportamiento en el runtime de .NET Framework 4.7 cuando la aplicación se cargará en versiones anteriores de .NET Framework puede establecer el AppContext cambian a <code>false</code>.|
|Ámbito|Secundaria|
|Versión|4.7|
|Tipo|Redestinación|
|API afectadas|<ul><li><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle?displayProperty=nameWithType></li></ul>|

